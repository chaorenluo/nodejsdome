{"version":3,"sources":["webpack:///src/page/search/search.vue","webpack:///./src/page/search/search.vue?7fae","webpack:///./src/page/search/search.vue"],"names":["search","footGuide","headTop","header","imageBaseUrl","env","geohash","searchHistory","seclick","data","_this","this","searchValue","length","histoty","item","checkRes","id","search_reomver","search_search","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","head-title","goBack","_v","directives","name","rawName","value","expression","type","placeholder","domProps","on","input","$event","target","composing","click","preventDefault","submitclick","showHistory","_l","key","_s","xmlns","version","deleteHistory","staticStyle","stroke","stroke-width","x1","y1","x2","y2","_m","_e","restaurantList","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/33.fb708e5e6fd8818ccac2.js","sourcesContent":["<template>\r\n    <div class=\"search_container\">\r\n        <head-top head-title=\"搜索\" goBack=\"true\"></head-top>\r\n        <form class=\"search_body\">\r\n            <div class=\"input\">\r\n                <input type=\"search\" placeholder=\"请输入商家或者美食名称\" v-model=\"searchValue\" @input=\"seclick\">\r\n                <input type=\"submit\" name=\"\" id=\"\" @click.prevent=\"submitclick('')\">\r\n            </div>\r\n        </form>\r\n        <!-- 历史记录 -->\r\n        <section class=\"search_lishi\" v-if=\"showHistory&&searchHistory\">\r\n            <header>\r\n                历史记录\r\n            </header>\r\n            <ul>\r\n                <li v-for=\"(item,id) in searchHistory\" :key=\"id\">\r\n                    <div class=\"tx_img\">\r\n                        <span>{{item}}</span>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" class=\"delete_icon\" @click=\"deleteHistory(id)\">\r\n                            <line x1=\"8\" y1=\"8\" x2=\"18\" y2=\"18\" style=\"stroke:#999;stroke-width:3\" />\r\n                            <line x1=\"18\" y1=\"8\" x2=\"8\" y2=\"18\" style=\"stroke:#999;stroke-width:3\" />\r\n                        </svg>\r\n                    </div>\r\n                </li>\r\n                <div class=\"search_reomver\" @click=\"search_reomver\">\r\n                    <div class=\"tx\">\r\n                        <span>清空历史记录</span>\r\n                    </div>\r\n                </div>\r\n            </ul>\r\n        </section>\r\n        <section class=\"search_body_s\" v-if=\"restaurantList.length\">\r\n            没有记录\r\n        </section>\r\n        <!-- 无搜索结果 -->\r\n        <section class=\"search_wu\" v-show=\"emptyResult\">\r\n            <header>很抱歉! 无搜索结果</header>\r\n        </section>\r\n        <foot-guide></foot-guide>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport headTop from '../../components/header/header'\r\nimport {getStore,setStore} from '../../config/mUtils'\r\nimport {searchRestaurant} from '../../service/getData'\r\nimport footGuide from '../../components/footer/footGuide'\r\nimport {imageBaseUrl} from '../../config/env.js'\r\nexport default {\r\n    components: {\r\n        footGuide,\r\n        headTop\r\n    },\r\n    data () {\r\n        return {\r\n            geohash:'',//miste页面传过来的信息\r\n            searchValue:'',//搜索内容\r\n            restaurantList:[],//收索返回的结果\r\n            imageBaseUrl,\r\n            searchHistory:[],//历史搜索\r\n            showHistory:true,//是否显示历史记录\r\n            emptyResult:false,//搜索为空显示\r\n        }\r\n    },mounted () {\r\n        this.geohash=this.$route.params.geohash;\r\n        if(getStore('searchHistory')){\r\n            this.searchHistory=JSON.parse( getStore('searchHistory'));\r\n            console.log(this.searchHistory);\r\n        }\r\n    },methods: {\r\n        seclick()\r\n        {\r\n            if(this.searchValue=='')\r\n            {\r\n                this.showHistory=true;\r\n                this.emptyResult=false;\r\n                this.restaurantList=[];\r\n\r\n            }\r\n        },\r\n        async submitclick(data)\r\n        {\r\n            if(data)\r\n            {\r\n                this.searchValue=data;\r\n            }else if(!this.searchValue){\r\n                return;\r\n            }\r\n            //隐藏历史记录\r\n            this.showHistory=false;\r\n            //获取收缩结果\r\n            this.restaurantList=await searchRestaurant(this.geohash,this.searchValue);\r\n            this.emptyResult=!this.restaurantList.length;\r\n            //获取已经存入的历史记录对比看是否重复\r\n            let histoty=getStore('searchHistory');\r\n            if(histoty)\r\n            {\r\n                let checkRes=false;\r\n                this.searchHistory=JSON.parse(histoty);\r\n                this.searchHistory.forEach(item=>{\r\n                    if(this.searchValue==item)\r\n                    {\r\n                        checkRes=true;\r\n                    }\r\n                })\r\n                if(!checkRes)\r\n                {\r\n                    this.searchHistory.push(this.searchValue);\r\n                }\r\n            }else{\r\n                this.searchHistory.push(this.searchValue);\r\n            }\r\n            setStore('searchHistory',this.searchHistory);\r\n        },\r\n        //删除单笔历史记录\r\n        deleteHistory(id)\r\n        {\r\n            if(this.searchHistory[id])\r\n            {\r\n                this.searchHistory.splice(id,1);\r\n                setStore('searchHistory',this.searchHistory)\r\n            }\r\n        },\r\n        //删除全部历史记录\r\n        search_reomver()\r\n        {\r\n            this.searchHistory=[];\r\n            this.showHistory=false;\r\n            setStore('searchHistory',this.searchHistory)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scopde>\r\n@import '../../style/mixin.scss';\r\n.search_body{\r\n    margin-top: 1.95rem;\r\n    background: #fff;\r\n    @include wh(100%,2.5rem);\r\n    text-align: center;\r\n    .input{\r\n        padding:0.5rem;\r\n        display: flex;\r\n        align-items: center;\r\n        input:nth-of-type(1)\r\n        {\r\n            \r\n            flex:3;\r\n            height: 1.5rem;\r\n            border:1px solid #e4e4e4;\r\n            background: #f2f2f2;\r\n            border-radius: 0.2rem;\r\n            padding:0.2rem;\r\n            @include sc(0.6rem,#333);\r\n        }\r\n        input:nth-of-type(2)\r\n        {\r\n            flex:1;\r\n            height: 1.5rem;\r\n            background: $blue;\r\n            border-radius: 0.2rem;\r\n            @include sc(0.6rem,#fff);\r\n            margin-left: 0.3rem;\r\n        }\r\n    }\r\n}\r\n.search_lishi{\r\n    header{\r\n        margin-top: 0.4rem;\r\n        padding:0.4rem;\r\n        @include sc(0.6rem,#333);\r\n        font-weight: bold;\r\n    }\r\n    ul{\r\n        li{\r\n            background: #fff;\r\n            border-bottom:0.025rem solid #f1f1f1;\r\n            .tx_img{\r\n                display: flex;\r\n                justify-content: space-between;\r\n                align-items: center;\r\n                padding:0.5rem;\r\n                span{\r\n                    @include sc(0.5rem,#333);\r\n                }\r\n                svg{\r\n                    @include wh(.8rem,.8rem);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n.search_wu{\r\n    background: #fff;\r\n    margin-top: 0.3rem;\r\n    @include sc(0.6rem,#333);\r\n    text-align: center;\r\n    padding:0.4rem;\r\n}\r\n.search_reomver{\r\n    background: #fff;\r\n    .tx{\r\n        @include sc(0.7rem,$blue);\r\n        span{\r\n            color:$blue;\r\n        }\r\n        font-weight: 600;\r\n        text-align: center;\r\n        padding:0.4rem;\r\n    }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/search/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search_container\"},[_c('head-top',{attrs:{\"head-title\":\"搜索\",\"goBack\":\"true\"}}),_vm._v(\" \"),_c('form',{staticClass:\"search_body\"},[_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchValue),expression:\"searchValue\"}],attrs:{\"type\":\"search\",\"placeholder\":\"请输入商家或者美食名称\"},domProps:{\"value\":(_vm.searchValue)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.searchValue=$event.target.value},_vm.seclick]}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"submit\",\"name\":\"\",\"id\":\"\"},on:{\"click\":function($event){$event.preventDefault();_vm.submitclick('')}}})])]),_vm._v(\" \"),(_vm.showHistory&&_vm.searchHistory)?_c('section',{staticClass:\"search_lishi\"},[_c('header',[_vm._v(\"\\n            历史记录\\n        \")]),_vm._v(\" \"),_c('ul',[_vm._l((_vm.searchHistory),function(item,id){return _c('li',{key:id},[_c('div',{staticClass:\"tx_img\"},[_c('span',[_vm._v(_vm._s(item))]),_vm._v(\" \"),_c('svg',{staticClass:\"delete_icon\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\"},on:{\"click\":function($event){_vm.deleteHistory(id)}}},[_c('line',{staticStyle:{\"stroke\":\"#999\",\"stroke-width\":\"3\"},attrs:{\"x1\":\"8\",\"y1\":\"8\",\"x2\":\"18\",\"y2\":\"18\"}}),_vm._v(\" \"),_c('line',{staticStyle:{\"stroke\":\"#999\",\"stroke-width\":\"3\"},attrs:{\"x1\":\"18\",\"y1\":\"8\",\"x2\":\"8\",\"y2\":\"18\"}})])])])}),_vm._v(\" \"),_c('div',{staticClass:\"search_reomver\",on:{\"click\":_vm.search_reomver}},[_vm._m(0)])],2)]):_vm._e(),_vm._v(\" \"),(_vm.restaurantList.length)?_c('section',{staticClass:\"search_body_s\"},[_vm._v(\"\\n        没有记录\\n    \")]):_vm._e(),_vm._v(\" \"),_c('section',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.emptyResult),expression:\"emptyResult\"}],staticClass:\"search_wu\"},[_c('header',[_vm._v(\"很抱歉! 无搜索结果\")])]),_vm._v(\" \"),_c('foot-guide')],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tx\"},[_c('span',[_vm._v(\"清空历史记录\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2c5f5a36\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/search/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2c5f5a36\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2c5f5a36\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/search/search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}