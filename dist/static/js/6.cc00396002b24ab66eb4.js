webpackJsonp([6],{Pgbi:function(t,s){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTA4MCAyNjEiPjxkZWZzPjxwYXRoIGlkPSJiIiBkPSJNMCAwaDEwODB2MjYwSDB6Ii8+PGZpbHRlciBpZD0iYSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgeD0iLTUwJSIgeT0iLTUwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij48ZmVPZmZzZXQgZHk9Ii0xIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIi8+PGZlQ29sb3JNYXRyaXggaW49InNoYWRvd09mZnNldE91dGVyMSIgdmFsdWVzPSIwIDAgMCAwIDAuOTMzMzMzMzMzIDAgMCAwIDAgMC45MzMzMzMzMzMgMCAwIDAgMCAwLjkzMzMzMzMzMyAwIDAgMCAxIDAiLz48L2ZpbHRlcj48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDEpIj48dXNlIGZpbGw9IiMwMDAiIGZpbHRlcj0idXJsKCNhKSIgeGxpbms6aHJlZj0iI2IiLz48dXNlIGZpbGw9IiNGRkYiIHhsaW5rOmhyZWY9IiNiIi8+PHBhdGggZmlsbD0iI0Y2RjZGNiIgZD0iTTIzMCA0NGg1MzN2NDZIMjMweiIvPjxyZWN0IHdpZHRoPSIxNzIiIGhlaWdodD0iMTcyIiB4PSIzMCIgeT0iNDQiIGZpbGw9IiNGNkY2RjYiIHJ4PSI0Ii8+PHBhdGggZmlsbD0iI0Y2RjZGNiIgZD0iTTIzMCAxMThoMzY5djMwSDIzMHpNMjMwIDE4MmgzMjN2MzBIMjMwek04MTIgMTE1aDIzOHYzOUg4MTJ6TTgwOCAxODRoMjQydjMwSDgwOHpNOTE3IDQ4aDEzM3YzN0g5MTd6Ii8+PC9nPjwvc3ZnPg=="},"RA/b":function(t,s,e){"use strict";var i=e("Xxa5"),a=e.n(i),r=e("Gu7T"),n=e.n(r),o=e("exGp"),l=e.n(o),c=e("Dd8w"),_=e.n(c),d=e("we8T"),u=e("i84Q"),h=e("NYxO"),v=e("yclV"),p=e("uaSg"),g=e("44dg"),y=e("vuW6"),m={data:function(){return{setoff:0,shopListArr:[],preventRepeatReuqest:!1,showBackStatus:!1,showLoading:!0,touchend:!1,imageBaseUrl:p.b}},computed:_()({},Object(h.d)(["latitude","longitude"])),components:{loading:g.a,satingStar:y.a},mounted:function(){this.initData()},methods:{initData:function(){var t=this;return l()(a.a.mark(function s(){var e;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(u.I)(t.latitude,t.longitude,t.setoff,t.restaurantCategoryId);case 2:e=s.sent,t.shopListArr=[].concat(n()(e)),e.length<20&&(t.touchend=!0),console.log("完成"),t.hideLoading(),Object(v.f)(function(s){t.showBackStatus=s});case 8:case"end":return s.stop()}},s,t)}))()},hideLoading:function(){this.showLoading=!1},backTop:function(){Object(v.a)(document.body,{scrollTop:0},400,"ease-out")},loadMores:function(){var t=this;return l()(a.a.mark(function s(){var e;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!t.touchend){s.next=2;break}return s.abrupt("return");case 2:if(!t.preventRepeatReuqest){s.next=4;break}return s.abrupt("return");case 4:return t.showLoading=!0,t.preventRepeatReuqest=!0,t.setoff+=20,s.next=9,Object(u.I)(t.latitude,t.longitude,t.setoff,t.restaurantCategoryId);case 9:if(e=s.sent,t.hideLoading(),t.shopListArr=[].concat(n()(t.shopListArr),n()(e)),!(e.length<20)){s.next=15;break}return t.touchend=!0,s.abrupt("return");case 15:t.preventRepeatReuqest=!1;case 16:case"end":return s.stop()}},s,t)}))()},zhunshi:function(t){var s=void 0;return t instanceof Array&&t.length?t.forEach(function(t){"准"===t.icon_name&&(s=!0)}):s=!1,s},listenPropChange:function(){var t=this;return l()(a.a.mark(function s(){var e;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.showLoading=!0,t.setoff=0,s.next=4,Object(u.I)(t.latitude,t.longitude,t.setoff,"",t.restaurantCategoryIds,t.sortByType,t.deliveryMode,t.supportIds);case 4:e=s.sent,t.showLoading=!1,t.shopListArr=[].concat(n()(e));case 7:case"end":return s.stop()}},s,t)}))()}},mixins:[d.b],props:["restaurantCategoryId","geohash","restaurantCategoryIds","sortByType","confirmSelect","deliveryMode","supportIds"],watch:{restaurantCategoryIds:function(t){this.listenPropChange()},sortByType:function(t){this.listenPropChange()},confirmSelect:function(t){this.listenPropChange(),this.$emit("DidConfrim")}}},f={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"shoplist_container"},[t.shopListArr.length?i("ul",{directives:[{name:"load-more",rawName:"v-load-more",value:t.loadMores,expression:"loadMores"}],attrs:{type:"1"}},t._l(t.shopListArr,function(s){return i("router-link",{key:s.id,staticClass:"shop_li",attrs:{tag:"li",to:{path:"shop",query:{geohash:t.geohash,id:s.id}}}},[i("section",[i("img",{staticClass:"shop_img",attrs:{src:t.imageBaseUrl+s.image_path,alt:""}})]),t._v(" "),i("hgroup",{staticClass:"shop_right"},[i("header",{staticClass:"shop_detail_header"},[i("h4",{staticClass:"shop_title ellipsis",class:s.is_premium?"premium":""},[t._v("\n                            "+t._s(s.name)+"\n                        ")]),t._v(" "),i("ul",{staticClass:"shop_detail_ul"},t._l(s.supports,function(s){return i("li",{key:s.id,staticClass:"supports"},[t._v("\n                                "+t._s(s.icon_name)+"\n                            ")])}))]),t._v(" "),i("h5",{staticClass:"rating_order_num"},[i("section",{staticClass:"rating_order_num_left"},[i("section",{staticClass:"rating_section"},[i("sating-star",{attrs:{rating:s.rating}}),t._v(" "),i("span",{staticClass:"rating_num"},[t._v(t._s(s.rating))])],1),t._v(" "),i("section",{staticClass:"order_section"},[t._v("\n                                月销"+t._s(s.recent_order_num)+"单\n                            ")])]),t._v(" "),i("section",{staticClass:"rating_order_num_right"},[s.delivery_mode?i("span",{staticClass:"delivery_style delivery_left"},[t._v(t._s(s.delivery_mode.text))]):t._e(),t._v(" "),t.zhunshi(s.supports)?i("span",{staticClass:"delivery_style delivery_right"},[t._v("准时达")]):t._e()])]),t._v(" "),i("h5",{staticClass:"fee_distance"},[i("p",{staticClass:"fee"},[t._v("\n                            ￥"+t._s(s.float_minimum_order_amount)+"起送\n                            "),i("span",{staticClass:"segmentation"}),t._v("\n                            "+t._s(s.piecewise_agent_fee.tips)+"\n                        ")]),t._v(" "),i("p",{staticClass:"distance_time"},[Number(s.distance)?i("span",[t._v(t._s(s.distance>1e3?(s.distance/1e3).toFixed(2)+"km":s.distance+"m")+"\n                                "),i("span",{staticClass:"segmentation"})]):i("span",[t._v(t._s(s.distance))]),t._v(" "),i("span",{staticClass:"segmentation"}),t._v(" "),i("span",{staticClass:"order_time"},[t._v(t._s(s.order_lead_time))])])])])])})):i("ul",{staticClass:"animation_opacity"},t._l(10,function(t){return i("li",{key:t,staticClass:"list_back_li"},[i("img",{staticClass:"list_back_svg",attrs:{src:e("Pgbi"),alt:""}})])})),t._v(" "),t.touchend?i("p",{staticClass:"empty_data"},[t._v("没有更多了")]):t._e(),t._v(" "),t.showBackStatus?i("aside",{staticClass:"return_top",on:{click:t.backTop}},[i("svg",{staticClass:"back_top_svg"},[i("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#backtop"}})])]):t._e(),t._v(" "),i("div",{ref:"abc",staticClass:" ",staticStyle:{background:"red"}}),t._v(" "),i("transition",{attrs:{name:"loading"}},[i("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]})],1)],1)},staticRenderFns:[]};var w=e("VU/8")(m,f,!1,function(t){e("y3bJ")},"data-v-8e750f44",null);s.a=w.exports},c7ad:function(t,s){},fHOz:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Xxa5"),a=e.n(i),r=e("exGp"),n=e.n(r),o=e("Dd8w"),l=e.n(o),c=e("hxP8"),_=e("NYxO"),d=e("i84Q"),u=e("we8T"),h=e("RA/b"),v={data:function(){return{geohash:"",headtitle:"",foodTitle:"",restaurant_category_id:"",restaurant_category_ids:"",sortBy:"",category:null,categoryDetail:null,sortByType:null,Delivery:null,Activity:null,delivery_mode:null,support_ids:[],filterNum:0,confirmStatus:!1}},components:{headeTop:c.a,shopList:h.a},created:function(){this.initData()},methods:l()({},Object(_.c)(["RECORD_ADDRESS"]),{initData:function(){var t=this;return n()(a.a.mark(function s(){var e;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.headtitle=t.$route.query.title,t.foodTitle=t.headtitle,t.geohash=t.$route.query.geohash,t.restaurant_category_id=t.$route.query.restaurant_category_id,t.latitude){s.next=9;break}return s.next=7,Object(d.x)(t.geohash);case 7:e=s.sent,t.RECORD_ADDRESS(e);case 9:return s.next=11,Object(d.i)(t.latitude,t.longitude);case 11:return t.category=s.sent,t.category.forEach(function(s){s.id==t.restaurant_category_id&&(t.categoryDetail=s.sub_categories)}),s.next=15,Object(d.j)(t.latitude,t.longitude);case 15:return t.Delivery=s.sent,s.next=18,Object(d.h)(t.latitude,t.longitude);case 18:t.Activity=s.sent,t.Activity.forEach(function(s,e){t.support_ids[e]={status:!1,id:s.id}});case 20:case"end":return s.stop()}},s,t)}))()},chooseType:function(t){var s=this;return n()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s.sortBy!==t?(s.sortBy=t,s.foodTitle="food"==t?"分类":s.headtitle):(s.sortBy="","food"==t&&(s.foodTitle=s.headtitle));case 1:case"end":return e.stop()}},e,s)}))()},selectCategoryName:function(t,s){0==s?(this.restaurant_category_ids=null,this.sortBy=""):(this.restaurant_category_id=t,this.categoryDetail=this.category[s].sub_categories)},getCategoryIds:function(t,s){this.restaurant_category_ids=t,this.sortBy="",this.foodTitle=this.headtitle=s},sortList:function(t){var s=void 0;s="P"!==t.target.nodeName.toUpperCase()?t.target.parentNode:t.target,this.sortByType=s.getAttribute("data"),this.sortBy=""},selectDeliveryMode:function(t){null==this.delivery_mode?(this.filterNum++,this.delivery_mode=t):this.delivery_mode==t?(this.filterNum--,this.delivery_mode=null):this.delivery_mode=t},selectSupportIds:function(t,s){var e=this;this.support_ids.splice(t,1,{status:!this.support_ids[t].status,id:s}),this.filterNum=null==this.delivery_mode?0:1,this.support_ids.forEach(function(t){t.status&&e.filterNum++})},clearSelect:function(){this.support_ids.map(function(t){return t.status=!1}),this.filterNum=0,this.delivery_mode=null},confirmSelectFun:function(){this.confirmStatus=!this.confirmStatus,this.sortBy=""},clear_kong:function(){this.delivery_mode=null}}),computed:l()({},Object(_.d)(["latitude","longitude"])),mixins:[u.a]},p={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"food_container"},[e("heade-top",{attrs:{"head-title":t.headtitle,goBack:"true"}}),t._v(" "),e("section",{staticClass:"sort_container"},[e("div",{staticClass:"sort_item",class:{choose_type:"foot"==t.sortBy}},[e("div",{staticClass:"sort_item_container",on:{click:function(s){t.chooseType("foot")}}},[e("div",{staticClass:"sort_item_border"},[e("span",{class:{category_title:"foot"==t.sortBy}},[t._v("\n                          "+t._s(t.foodTitle)+"\n                      ")]),t._v(" "),e("svg",{staticClass:"sort_icon",attrs:{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[e("polygon",{attrs:{points:"0,3 10,3 5,8"}})])])]),t._v(" "),e("transition",{directives:[{name:"show",rawName:"v-show",value:t.category,expression:"category"}],attrs:{name:"showlist"}},[e("section",{directives:[{name:"show",rawName:"v-show",value:"foot"==t.sortBy,expression:"sortBy=='foot'"}],staticClass:"category_container sort_detail_type"},[e("section",{staticClass:"category_left"},[e("ul",t._l(t.category,function(s,i){return e("li",{key:i,staticClass:"category_left_li",class:{category_active:t.restaurant_category_id==s.id},on:{click:function(e){t.selectCategoryName(s.id,i)}}},[e("section",[i?e("img",{staticClass:"categroy_icon",attrs:{src:t.getImgPath(s.image_url),alt:""}}):t._e(),t._v(" "),e("span",[t._v(t._s(s.name))])]),t._v(" "),e("section",[e("span",{staticClass:"category_count"},[t._v(t._s(s.count))]),t._v(" "),i?e("svg",{staticClass:"category_arrow",attrs:{width:"8",height:"8",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[e("path",{attrs:{d:"M0 0 L6 4 L0 8",stroke:"#bbb","stroke-width":"1",fill:"none"}})]):t._e()])])}))]),t._v(" "),e("section",{staticClass:"category_right"},[e("ul",t._l(t.categoryDetail,function(s,i){return i?e("li",{key:s.id,staticClass:"category_right_li",class:{category_right_choosed:t.restaurant_category_ids==s.id||!t.restaurant_category_ids&&0==i},on:{click:function(e){t.getCategoryIds(s.id,s.name)}}},[e("span",[t._v(t._s(s.name))]),t._v(" "),e("span",[t._v(t._s(s.count))])]):t._e()}))])])])],1),t._v(" "),e("div",{staticClass:"sort_item",class:{choose_type:"sort"==t.sortBy}},[e("div",{staticClass:"sort_item_container",on:{click:function(s){t.chooseType("sort")}}},[e("div",{staticClass:"sort_item_border"},[e("span",{class:{category_title:"sort"==t.sortBy}},[t._v("\n                          排序\n                      ")]),t._v(" "),e("svg",{staticClass:"sort_icon",attrs:{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[e("polygon",{attrs:{points:"0,3 10,3 5,8"}})])])]),t._v(" "),e("transition",{attrs:{name:"showlist"}},[e("section",{directives:[{name:"show",rawName:"v-show",value:"sort"==t.sortBy,expression:"sortBy=='sort'"}],staticClass:"sort_detail_type"},[e("ul",{staticClass:"sort_list_container",on:{click:function(s){t.sortList(s)}}},[e("li",{staticClass:"sort_list_li"},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#default"}})]),t._v(" "),e("p",{class:{sort_select:0==t.sortByType},attrs:{data:"0"}},[e("span",[t._v("智能排序")]),t._v(" "),0==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])]),t._v(" "),e("li",{staticClass:"sort_list_li"},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#distance"}})]),t._v(" "),e("p",{class:{sort_select:5==t.sortByType},attrs:{data:"5"}},[e("span",[t._v("距离最近")]),t._v(" "),5==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])]),t._v(" "),e("li",{staticClass:"sort_list_li"},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#hot"}})]),t._v(" "),e("p",{class:{sort_select:6==t.sortByType},attrs:{data:"6"}},[e("span",[t._v("销量最高")]),t._v(" "),6==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])]),t._v(" "),e("li",{staticClass:"sort_list_li"},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#price"}})]),t._v(" "),e("p",{class:{sort_select:1==t.sortByType},attrs:{data:"1"}},[e("span",[t._v("起送价低")]),t._v(" "),1==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])]),t._v(" "),e("li",{staticClass:"sort_list_li"},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#speed"}})]),t._v(" "),e("p",{class:{sort_select:2==t.sortByType},attrs:{data:"2"}},[e("span",[t._v("速度最快")]),t._v(" "),2==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])]),t._v(" "),e("li",{staticClass:"sort_list_li"},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#rating"}})]),t._v(" "),e("p",{class:{sort_select:3==t.sortByType},attrs:{data:"3"}},[e("span",[t._v("评分最高")]),t._v(" "),3==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])])])])])],1),t._v(" "),e("div",{staticClass:"sort_item",class:{choose_type:"activity"==t.sortBy}},[e("div",{staticClass:"sort_item_container",on:{click:function(s){t.chooseType("activity")}}},[e("div",{staticClass:"sort_item_border"},[e("span",{class:{category_title:"activity"==t.sortBy}},[t._v("\n                          筛选\n                      ")]),t._v(" "),e("svg",{staticClass:"sort_icon",attrs:{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[e("polygon",{attrs:{points:"0,3 10,3 5,8"}})])])]),t._v(" "),e("transition",{attrs:{name:"showlist"}},[e("section",{directives:[{name:"show",rawName:"v-show",value:"activity"==t.sortBy,expression:"sortBy=='activity'"}],staticClass:"sort_detail_type filter_container"},[e("section",{staticStyle:{width:"100%"}},[e("header",{staticClass:"filter_header_style"},[t._v("配送方式")]),t._v(" "),e("ul",{staticClass:"filter_ul"},t._l(t.Delivery,function(s){return e("li",{key:s.id,staticClass:"filter_li",on:{click:function(e){t.selectDeliveryMode(s.id)}}},[e("svg",{style:{opacity:0==s.id&&0!==t.delivery_mode?0:1}},[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":t.delivery_mode==s.id?"#selected":"#fengniao"}})]),t._v(" "),e("span",{class:{selected_filter:t.delivery_mode==s.id}},[t._v(t._s(s.text))])])}))]),t._v(" "),e("section",{staticStyle:{width:"100%"}},[e("header",{staticClass:"filter_header_style"},[t._v("\n                              商家属性(可以多选)\n                          ")]),t._v(" "),e("ul",{staticClass:"filter_ul",staticStyle:{paddingBottom:"0.5rem"}},t._l(t.Activity,function(s,i){return e("li",{key:s.id,staticClass:"filter_li",on:{click:function(e){t.selectSupportIds(i,s.id)}}},[e("svg",{directives:[{name:"show",rawName:"v-show",value:t.support_ids[i].status,expression:"support_ids[index].status"}],staticClass:"activity_svg"},[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.support_ids[i].status,expression:"!support_ids[index].status"}],staticClass:"filter_icon",style:{color:"#"+s.icon_color,borderColor:"#"+s.icon_color}},[t._v("\n                                    "+t._s(s.icon_name)+"\n                                ")]),t._v(" "),e("span",{class:{selected_filter:t.support_ids[i].status}},[t._v(t._s(s.name))])])}))]),t._v(" "),e("footer",{staticClass:"confirm_filter"},[e("div",{staticClass:"clear_all filter_button_style",on:{click:function(s){t.clearSelect()}}},[t._v("清空")]),t._v(" "),e("div",{staticClass:"filter_button_style  confirm_select",on:{click:function(s){t.confirmSelectFun()}}},[t._v("确定("+t._s(t.filterNum)+")")])])])])],1)]),t._v(" "),e("transition",{attrs:{name:"showcover"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.sortBy,expression:"sortBy"}],staticClass:"back_over"})]),t._v(" "),e("section",{staticClass:"shop_list_container"},[t.latitude?e("shop-list",{attrs:{geohash:t.geohash,restaurantCategoryId:t.restaurant_category_id,restaurantCategoryIds:t.restaurant_category_ids,sortByType:t.sortByType,deliveryMode:t.delivery_mode,confirmSelect:t.confirmStatus,supportIds:t.support_ids},on:{DidConfrim:t.clear_kong}}):t._e()],1)],1)},staticRenderFns:[]};var g=e("VU/8")(v,p,!1,function(t){e("c7ad")},"data-v-000a7f84",null);s.default=g.exports},y3bJ:function(t,s){}});
//# sourceMappingURL=6.cc00396002b24ab66eb4.js.map