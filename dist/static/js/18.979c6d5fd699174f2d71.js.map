{"version":3,"sources":["webpack:///src/page/city/city.vue","webpack:///./src/page/city/city.vue?3d77","webpack:///./src/page/city/city.vue"],"names":["city","data","headeTop","header","mounted","_this","this","cityid","name","initDate","postpois","_this2","inputVaule","res","geohash","index","hosltry","checkrepeat","choosePale","placeHistory","clearAll","city_city","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","goBack","head-title","cityname","slot","to","_v","on","submit","$event","preventDefault","directives","rawName","value","expression","type","placeholder","required","domProps","input","target","composing","click","_e","_l","item","key","nextpage","_s","address","historytitle","palcelist","length","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"qKAgCAA,GAEAC,KAAA,kIAYAC,SAAAC,EAAA,GADAC,QAAA,WAEA,IAAAC,EAAAC,oCACAC,8DAEAC,OACAF,KACAG,qBAIAC,SAAA,WACA,IAAAC,EAAAL,0DAGAM,sFAEA,cACAC,4BAMAJ,SAAA,uBAEA,sDAEA,wDAOAK,qBAEA,iCACAC,MACAC,EACA,QACA,+BACAA,oDAEAF,OAEA,KAGAG,0BAEAC,+BAGAA,mCAEAC,sDAEAL,cAGAM,SAAA,uBAEA,qBACAX,cC1GAY,GADiBC,OAFjB,WAA0B,IAAAC,EAAAjB,KAAakB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,mBAA6BF,EAAA,aAAkBG,OAAOC,OAAA,OAAAC,aAAAR,EAAAS,YAA2CN,EAAA,eAAoBE,YAAA,aAAAC,OAAgCI,KAAA,aAAAC,GAAA,SAAiCD,KAAA,eAAmBV,EAAAY,GAAA,cAAAZ,EAAAY,GAAA,KAAAT,EAAA,QAA8CE,YAAA,YAAAQ,IAA4BC,OAAA,SAAAC,GAA0BA,EAAAC,qBAA2Bb,EAAA,OAAAA,EAAA,SAAwBc,aAAahC,KAAA,QAAAiC,QAAA,UAAAC,MAAAnB,EAAA,WAAAoB,WAAA,eAA8Ef,YAAA,yBAAAC,OAA8Ce,KAAA,SAAApC,KAAA,OAAAqC,YAAA,cAAAC,SAAA,IAAwEC,UAAWL,MAAAnB,EAAA,YAAyBa,IAAKY,MAAA,SAAAV,GAAyBA,EAAAW,OAAAC,YAAsC3B,EAAAX,WAAA0B,EAAAW,OAAAP,aAAqCnB,EAAAY,GAAA,KAAAT,EAAA,OAAAA,EAAA,SAAsCE,YAAA,0BAAAC,OAA6Ce,KAAA,SAAAF,MAAA,MAA6BN,IAAKe,MAAA5B,EAAAb,gBAAsBa,EAAAY,GAAA,KAAAZ,EAAA,aAAAG,EAAA,UAAkDE,YAAA,wBAAkCL,EAAAY,GAAA,sBAAAZ,EAAA6B,KAAA7B,EAAAY,GAAA,KAAAT,EAAA,MAA6DE,YAAA,cAAyBL,EAAA8B,GAAA9B,EAAA,mBAAA+B,EAAAvC,GAA6C,OAAAW,EAAA,MAAgB6B,IAAAxC,EAAAqB,IAAce,MAAA,SAAAb,GAAyBf,EAAAiC,SAAAzC,EAAAuC,EAAAxC,aAAmCY,EAAA,MAAWE,YAAA,uBAAiCL,EAAAY,GAAAZ,EAAAkC,GAAAH,EAAA9C,SAAAe,EAAAY,GAAA,KAAAT,EAAA,KAAkDE,YAAA,0BAAoCL,EAAAY,GAAAZ,EAAAkC,GAAAH,EAAAI,iBAAmCnC,EAAAY,GAAA,KAAAZ,EAAAoC,cAAApC,EAAAqC,UAAAC,OAAAnC,EAAA,UAAqEE,YAAA,oBAAAQ,IAAoCe,MAAA5B,EAAAH,YAAsBG,EAAAY,GAAA,UAAAZ,EAAA6B,KAAA7B,EAAAY,GAAA,KAAAZ,EAAA,UAAAG,EAAA,OAAkEE,YAAA,sBAAgCL,EAAAY,GAAA,cAAAZ,EAAA6B,MAAA,IAEzlDU,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAjE,EACAqB,GATA,EAVA,SAAA6C,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/18.979c6d5fd699174f2d71.js","sourcesContent":["<template>\r\n  <div class=\"city_container\">\r\n      <heade-top goBack=\"true\" :head-title=\"cityname\">\r\n          <router-link slot=\"changecity\" to=\"/home\" class=\"chage_city\">切换城市</router-link>\r\n      </heade-top>\r\n      <form class=\"city_from\" v-on:submit.prevent>\r\n          <div>\r\n              <!--search 定义用于搜索的文本字段 -->\r\n              <input type=\"search\" name=\"city\" placeholder=\"输入学习,商务楼,地址\" class=\"city_input input_style\" required v-model=\"inputVaule\">\r\n          </div>\r\n          <div>\r\n              <input type=\"submit\" class=\"city_submit input_style\" @click=\"postpois\" value=\"提交\">\r\n          </div>\r\n      </form>\r\n    <header class=\"pois_search_history\" v-if=\"historytitle\">\r\n        搜索历史\r\n    </header>\r\n    <ul class=\"getpois_ul\">\r\n        <li v-for=\"(item,index) in palcelist\" @click=\"nextpage(index,item.geohash)\" :key=\"index\">\r\n            <h4 class=\"pois_name ellipsis\">{{item.name}}</h4>\r\n            <p class=\"pois_address ellipsis\">{{item.address}}</p>\r\n        </li>\r\n    </ul>\r\n    <footer v-if=\"historytitle&&palcelist.length\" class=\"clear_all_history\" @click=\"clearAll\">清空所有</footer>\r\n    <div class=\"search_none_place\" v-if=\"placeNone\">很抱歉无搜索结果</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport headeTop from '../../components/header/header'\r\nimport {currentcity,searchplace} from '../../service/getData'\r\nimport {getStore,setStore,removeStore} from '../../config/mUtils'\r\nexport default {\r\n    data()\r\n    {\r\n        return{\r\n            inputVaule:'',//搜索地址\r\n            cityid:null,//当前城市id\r\n            cityname:null,//当前城市名称\r\n            palcelist:[],//搜索城市列表\r\n            placeHistory:[],//历史记录\r\n            historytitle:true,//默认显示删除历史记录搜索后隐藏\r\n            placeNone:false//搜索无结果显示提示\r\n        }\r\n    },components: {\r\n        headeTop\r\n    },mounted () {\r\n        this.cityid=this.$route.params.cityid;\r\n        currentcity(this.cityid).then(res=>{\r\n           this.cityname=res.name;\r\n        }),\r\n        this.initDate();\r\n    },\r\n    methods: {\r\n        //提交查询\r\n        postpois()\r\n        {\r\n            //输入值不为空时发生信息\r\n              if (this.inputVaule) {\r\n                     console.log(this.cityid+\"---\"+this.inputVaule);\r\n                    searchplace(this.cityid, this.inputVaule).then(res => {\r\n                        this.historytitle = false;\r\n                        this.palcelist = res;\r\n                        this.placeNone = res.length? false : true;\r\n                    })\r\n                }\r\n        },\r\n        //获取历史记录\r\n        initDate()\r\n        {\r\n            if(getStore('placeHistory'))\r\n            {\r\n                this.palcelist=JSON.parse(getStore('placeHistory'));\r\n            }else{\r\n                this.palcelist=[];\r\n            }\r\n        },\r\n        //存储历史记录\r\n        //判断是否纯在 再的话不储存不在的话储存\r\n        nextpage(index,geohash)\r\n        {\r\n            let hosltry=getStore('placeHistory');\r\n            let choosePale=this.palcelist[index];\r\n            if(hosltry)\r\n            {\r\n                let checkrepeat=false;\r\n                this.placeHistory=JSON.parse(hosltry);\r\n                this.placeHistory.forEach(item=>{\r\n                    if(item.geohash==geohash)\r\n                    {\r\n                        checkrepeat=true;\r\n                    }\r\n                })\r\n                if(!checkrepeat)\r\n                {\r\n                   this.placeHistory.push(choosePale); \r\n                }\r\n            }else{\r\n                this.placeHistory.push(choosePale);\r\n            }\r\n            setStore('placeHistory',this.placeHistory);\r\n            //带参数调整\r\n            this.$router.push({path:'/msite',query:{geohash}})\r\n        },\r\n        //清空记录\r\n        clearAll()\r\n        {\r\n            removeStore('placeHistory');\r\n            this.initDate();\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n    @import '../../style/mixin.scss';\r\n    .chage_city{\r\n        @include sc(0.6rem,#fff);\r\n        right: .4rem;\r\n        @include ct\r\n    }\r\n    .city_container{\r\n     padding-top: 2.3rem;\r\n    }\r\n    .city_from{\r\n        background-color: #fff;\r\n        border-top: 1px solid #fff;\r\n        border-bottom: 1px solid $bc;\r\n       padding-top: 0.4rem;\r\n       div{\r\n           margin:0 auto;\r\n           width: 95%;\r\n           text-align: center;\r\n            .input_style{\r\n             @include wh(100%,1.4rem);\r\n                border-radius: 0.1rem;\r\n                margin-bottom: 0.4rem;\r\n            }\r\n            .city_input{\r\n                border:1px solid $bc;\r\n                padding: 0 0.3rem;\r\n                @include sc(0.65rem,#666);\r\n            }\r\n            .city_submit{\r\n                border:1px solid $bc;\r\n                padding:0 0.3rem;\r\n                @include sc(0.65rem,#fff);\r\n                background-color: $blue;\r\n            }\r\n       }\r\n    }\r\n    .pois_search_history{\r\n        @include font(0.475rem,0.8rem);\r\n        border-top:1px solid $bc;\r\n        border-bottom: 1px solid $bc;\r\n        padding-left: 0.5rem;\r\n    }\r\n    .getpois_ul{\r\n        background-color: #fff;\r\n        border-top: 1px solid $bc;\r\n        li{\r\n            border-top: 1px solid $bc;\r\n            border-bottom: 1px solid $bc;\r\n            margin:0 auto;\r\n            padding-top: 0.65rem;\r\n            .pois_name{\r\n                margin:0 auto 0.35rem;\r\n                width: 90%;\r\n                @include sc(0.65rem,#333);\r\n            }\r\n            .pois_address{\r\n                @include sc(0.45rem,#999);\r\n                margin:0 auto 0.55rem;\r\n                width: 90%;\r\n            }\r\n        }\r\n    }\r\n    .search_none_place{\r\n        background-color: #fff;\r\n        color:#333;\r\n        margin:0 auto;\r\n        @include font(0.65rem,1.75rem);\r\n    }\r\n    .clear_all_history{\r\n        background-color: #fff;\r\n        text-align: center;\r\n        line-height: 2rem;\r\n        @include sc(0.7rem,#666);\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/city/city.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"city_container\"},[_c('heade-top',{attrs:{\"goBack\":\"true\",\"head-title\":_vm.cityname}},[_c('router-link',{staticClass:\"chage_city\",attrs:{\"slot\":\"changecity\",\"to\":\"/home\"},slot:\"changecity\"},[_vm._v(\"切换城市\")])],1),_vm._v(\" \"),_c('form',{staticClass:\"city_from\",on:{\"submit\":function($event){$event.preventDefault();}}},[_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputVaule),expression:\"inputVaule\"}],staticClass:\"city_input input_style\",attrs:{\"type\":\"search\",\"name\":\"city\",\"placeholder\":\"输入学习,商务楼,地址\",\"required\":\"\"},domProps:{\"value\":(_vm.inputVaule)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputVaule=$event.target.value}}})]),_vm._v(\" \"),_c('div',[_c('input',{staticClass:\"city_submit input_style\",attrs:{\"type\":\"submit\",\"value\":\"提交\"},on:{\"click\":_vm.postpois}})])]),_vm._v(\" \"),(_vm.historytitle)?_c('header',{staticClass:\"pois_search_history\"},[_vm._v(\"\\n      搜索历史\\n  \")]):_vm._e(),_vm._v(\" \"),_c('ul',{staticClass:\"getpois_ul\"},_vm._l((_vm.palcelist),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){_vm.nextpage(index,item.geohash)}}},[_c('h4',{staticClass:\"pois_name ellipsis\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('p',{staticClass:\"pois_address ellipsis\"},[_vm._v(_vm._s(item.address))])])})),_vm._v(\" \"),(_vm.historytitle&&_vm.palcelist.length)?_c('footer',{staticClass:\"clear_all_history\",on:{\"click\":_vm.clearAll}},[_vm._v(\"清空所有\")]):_vm._e(),_vm._v(\" \"),(_vm.placeNone)?_c('div',{staticClass:\"search_none_place\"},[_vm._v(\"很抱歉无搜索结果\")]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d238c724\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/city/city.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d238c724\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./city.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./city.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./city.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d238c724\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./city.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d238c724\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/city/city.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}