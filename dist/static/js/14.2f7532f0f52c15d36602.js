webpackJsonp([14],{"+4OU":function(t,e){},"9zw/":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("Xxa5"),a=r.n(s),n=r("Gu7T"),i=r.n(n),o=r("exGp"),c=r.n(o),u=r("Dd8w"),l=r.n(u),d=r("NYxO"),h=r("hxP8"),m=r("44dg"),_={props:["time"],created:function(){this.countNUm-=this.numTime,this.remainingTime()},data:function(){return{countNUm:900,showAlert:!1,alertText:null}},components:{alertTip:r("Uoa1").a},methods:{closeTip:function(){this.$emit("closeTip")},gotoPay:function(){this.showAlert=!0,this.alertText="暂不开放支付接口"},remainingTime:function(){var t=this;clearInterval(this.tiemr),this.tiemr=setInterval(function(){t.countNUm--,0==t.countNUm&&(clearInterval(t.tiemr),t.alertText="支付超时",t.showAlert=!0)},1e3)}},computed:{remaining:function(){var t=parseInt(this.countNUm/60),e=parseInt(this.countNUm%60);return t<10&&(t="0"+t),e<10&&(e="0"+e),"去支付(还剩"+t+"分"+e+"秒)"},numTime:function(){return console.log(this.time),-1!==this.time.toString().indexOf("分钟")?60*parseInt(this.time):parseInt(this.time)}}},p={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page"},[r("span",{staticClass:"rem_time",staticStyle:{color:"orange","border-width":"1px","border-style":"solid","border-color":"orange"},on:{click:t.gotoPay}},[t._v("\n        "+t._s(t.remaining)+"\n    ")]),t._v(" "),r("alert-tip",{directives:[{name:"show",rawName:"v-show",value:t.showAlert,expression:"showAlert"}],attrs:{alertText:t.alertText},on:{closeTip:function(e){t.showAlert=!1}}})],1)},staticRenderFns:[]};var f=r("VU/8")(_,p,!1,function(t){r("+4OU")},null,null).exports,v=r("we8T"),g=r("FPXY"),w=r("i84Q"),x=r("uaSg"),b={components:{headTop:h.a,foodGuide:g.a,loading:m.a,computeTime:f},mixins:[v.b],mounted:function(){this.initData()},methods:l()({},Object(d.c)(["SAVE_ORDER"]),{initData:function(){var t=this;return c()(a.a.mark(function e(){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.userInfo||!t.userInfo.user_id){e.next=8;break}return e.next=3,Object(w.p)(t.userInfo.user_id,t.offset);case 3:r=e.sent,t.orderList=[].concat(i()(r)),t.hideLoading(),e.next=9;break;case 8:t.hideLoading();case 9:case"end":return e.stop()}},e,t)}))()},hideLoading:function(){this.showLoading=!1},loadMore:function(){var t=this;return c()(a.a.mark(function e(){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.preventRepeat){e.next=2;break}return e.abrupt("return");case 2:return t.preventRepeat=!0,t.offset+=10,t.showLoading=!0,e.next=7,Object(w.p)(t.userInfo.user_id,t.offset);case 7:if(r=e.sent,t.orderList=[].concat(i()(t.orderList),i()(r)),t.hideLoading(),!(r.length<10)){e.next=12;break}return e.abrupt("return");case 12:t.preventRepeat=!1;case 13:case"end":return e.stop()}},e,t)}))()},showDetail:function(t){this.SAVE_ORDER(t),this.preventRepeat=!1,this.$router.push("/order/orderDetail")}}),computed:l()({},Object(d.d)(["userInfo","geohash"])),data:function(){return{orderList:null,offset:0,preventRepeat:!1,showLoading:!0,imageBaseUrl:x.b}},watch:{userInfo:function(t){this.userInfo&&this.userInfo.user_id&&!this.orderList&&this.initData()}}},k={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order_container"},[r("head-top",{attrs:{"head-title":"订单列表1",goBack:"true"}}),t._v(" "),t.orderList?r("ul",{directives:[{name:"load-more",rawName:"v-load-more",value:t.loadMore,expression:"loadMore"}],staticClass:"order_ul"},t._l(t.orderList,function(e,s){return r("li",{key:s},[r("img",{staticClass:"restaurant_img",attrs:{src:t.imageBaseUrl+e.restaurant_image_url,alt:""}}),t._v(" "),r("section",{staticClass:"order_item_right"},[r("section",{on:{click:function(r){t.showDetail(e)}}},[r("header",{staticClass:"order_item_right_header"},[r("section",{staticClass:"order_header"},[r("h4",[r("span",{staticClass:"ellipsis"},[t._v(t._s(e.restaurant_name))]),t._v(" "),r("svg",{staticClass:"arrow_right",attrs:{fill:"#333"}},[r("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])]),t._v(" "),r("p",{staticClass:"order_time"},[t._v(t._s(e.formatted_created_at))])]),t._v(" "),r("p",{staticClass:"order_status"},[t._v("\n                              "+t._s(e.status_bar.title)+"\n                      ")])]),t._v(" "),r("section",{staticClass:"order_backet"},[r("p",{staticClass:"order_name ellipsis"},[t._v(t._s(e.basket.group[0][0].name)+t._s(e.basket.group[0].length>1?"等"+e.basket.group[0].length+"件商品":""))]),t._v(" "),r("p",{staticClass:"order_amount"},[t._v("￥"+t._s(e.total_amount.toFixed(2)))])])]),t._v(" "),r("div",{staticClass:"order_again"},["等待支付"==e.status_bar.title?r("compute-time",{attrs:{time:e.time_pass}}):r("router-link",{staticClass:"buy_again",attrs:{to:{path:"/shop",query:{geohash:t.geohash,id:e.restaurant_id}},tag:"span"}},[t._v("再来一单")])],1)])])})):t._e(),t._v(" "),r("food-guide"),t._v(" "),r("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]}),t._v(" "),r("transition",{attrs:{name:"router-slid"}},[r("router-view")],1)],1)},staticRenderFns:[]};var C=r("VU/8")(b,k,!1,function(t){r("mSaF")},null,null);e.default=C.exports},mSaF:function(t,e){}});
//# sourceMappingURL=14.2f7532f0f52c15d36602.js.map